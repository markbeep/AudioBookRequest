services:
  web:
    # start with `docker-compose --profile local up`
    profiles: [local]
    build:
      context: .
      args:
        - VERSION=local
    volumes:
      - ./config:/config
    ports:
      - "8000:8000"

  gotify:
    image: gotify/server
    ports:
      - "8080:80"
    volumes:
      - ./data/gotify/data:/app/data

  psql:
    image: postgres:15
    environment:
      POSTGRES_USER: abr
      POSTGRES_PASSWORD: password
      POSTGRES_DB: audiobookrequest
    volumes:
      - ./data/postgres:/var/lib/postgresql/data
    ports:
      - "5432:5432"
